<div class="floating-buttons">
    <button class="floating-btn scroll-btn" (click)="toggleScroll()" aria-label="Subir o bajar">
        <i [class]="isAtTop ? 'fa fa-chevron-down' : 'fa fa-chevron-up'"></i>
    </button>

    <button class="floating-btn chat-btn" (click)="toggleChat()" aria-label="Agente inteligente">
        <img src="assets/avatar.png" alt="Agente" />
    </button>
</div>

<div class="chat-panel" [class.open]="isChatOpen">
    <div class="chat-header">
        <div class="avatar">
            <img src="assets/avatar.png" alt="Agente" />
        </div>
        <h3>Agente Inteligente</h3>
        <button class="close-btn" (click)="toggleChat()">✕</button>
    </div>

    <div class="chat-body">
        <div *ngIf="messages.length === 0" class="placeholder">
            <p>Hola, soy un agente inteligente. Aquí responderé todas tus preguntas sobre el portafolio de Pedro Arnedo.</p>
        </div>

        <div *ngFor="let msg of messages" [ngClass]="msg.from" class="chat-message">
            <div class="bubble">
                <span>{{ msg.text }}</span>
            </div>
        </div>

        <div *ngIf="loading" class="chat-message bot">
            <div class="bubble typing">
                <span>Escribiendo...</span>
            </div>
        </div>
    </div>

    <div class="chat-input">
        <input type="text" placeholder="Escribe un mensaje..." [(ngModel)]="userMessage" (keyup.enter)="sendMessage()"
            [disabled]="loading" />
        <button (click)="sendMessage()" [disabled]="!userMessage.trim() || loading">
            <i class="fa fa-paper-plane"></i>
        </button>
    </div>
</div>